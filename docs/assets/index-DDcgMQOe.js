(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const p={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,g:16,h:17,i:18,j:19,k:20,l:21,m:22,n:23,o:24,p:25,q:26,r:27,s:28,t:29,u:30,v:31,w:32,x:33,y:34,z:35,"-":36},C=Object.fromEntries(Object.entries(p).map(([t,e])=>[e,t]));function M(t){return p[t]}function N(t,e){return(16-e)*t}const d={x:"PARTY",y:"AREA",z:"MEASUREMENT_POINT",v:"LOCATION",w:"RESOURCE",t:"TIE_LINE",a:"SUBSTATION"},m={10:{name:"ENTSO-E",country:"EU"},11:{name:"BDEW",country:"DE"},12:{name:"Swissgrid",country:"CH"},13:{name:"A&B",country:"AT"},14:{name:"APCS",country:"AT"},15:{name:"Mavir",country:"HU"},16:{name:"REN",country:"PT"},17:{name:"RTE",country:"FR"},18:{name:"REE",country:"ES"},19:{name:"PSE S.A.",country:"PL"},20:{name:"CREOS",country:"LU"},21:{name:"ENTSOG",country:"EU"},22:{name:"Elia",country:"BE"},23:{name:"EFET",country:"EU"},24:{name:"SEPS",country:"SK"},25:{name:"AGGM",country:"AT"},26:{name:"Terna",country:"IT"},27:{name:"CEPS",country:"CZ"},28:{name:"ELES",country:"SI"},29:{name:"ADMIE",country:"GR"},30:{name:"Transelectrica",country:"RO"},31:{name:"HOPS",country:"HR"},32:{name:"ESO AD",country:"BG"},33:{name:"MEPSO",country:"MK"},34:{name:"EMS",country:"RS"},35:{name:"CGES",country:"ME"},36:{name:"NOS BIH",country:"BA"},37:{name:"DVGW",country:"DE"},38:{name:"Elering",country:"EE"},39:{name:"FGSZ",country:"HU"},40:{name:"EPIAS",country:"TR"},41:{name:"LITGRID AB",country:"LT"},42:{name:"EU-STREAM",country:"SK"},43:{name:"AST",country:"LV"},44:{name:"Fingrid Oyj",country:"FI"},45:{name:"Energinet",country:"DK"},46:{name:"SVK",country:"SE"},47:{name:"Eirgrid",country:"IE, NI"},48:{name:"NationalGrid",country:"UK"},49:{name:"Tennet NL",country:"NL"},50:{name:"Statnett",country:"NO"},51:{name:"Plinovodi",country:"SI"},52:{name:"GTS",country:"NL"},53:{name:"GAZ-SYSTEM",country:"PL"},54:{name:"OST",country:"AL"},55:{name:"XOSERVE",country:"UK"},56:{name:"LLCGASTSOUKRAINE",country:"UA"},57:{name:"FLUXYS",country:"BE"},58:{name:"BULGARTRANSGAZ",country:"BG"},59:{name:"SRG",country:"IT"},60:{name:"Transgaz",country:"RO"},61:{name:"Conexus Baltic Grid",country:"LV"},62:{name:"UKRENERGO",country:"UA"},63:{name:"NaTran",country:"FR"},64:{name:"Moldelectrica",country:"MD"},65:{name:"GSE",country:"GE"},66:{name:"GasFINLAND",country:"FI"},67:{name:"SRBIJATRANSGAS",country:"RS"},68:{name:"VESTMOLDTRANSGAZ",country:"MD"},69:{name:"TSOC",country:"CY"},70:{name:"NOMAGAS JSC Skopje",country:"MK"}};function S(t){if(t.length!==15&&t.length!==16)return!1;t=t.toLowerCase();for(let e=0,n=t.length;e<n;++e)if(!(t.charCodeAt(e)>=97&&t.charCodeAt(e)<=122||t.charCodeAt(e)>=48&&t.charCodeAt(e)<=57||t[e]==="-"))return!1;return!0}function A(t){const e=t.substring(0,15).toLowerCase().split("").map(M).map(N).reduce((n,r)=>n+r,0);return C[36-(e-1)%37]}function O(t){if(!S(t))throw new Error("Malformed EIC code");return d[t[2]]}function v(t){if(!S(t))throw new Error("Malformed EIC code");return m[t.substring(0,2)]}function L(t){const e={isValid:!0,errors:[],warnings:[],issuer:void 0,type:void 0};t.length<16&&e.errors.push({errorMessage:"TOO_SHORT"}),t.length>16&&e.errors.push({errorMessage:"TOO_LONG"}),t=t.toLowerCase();for(let r=0,i=t.length;r<i;++r)t.charCodeAt(r)>=97&&t.charCodeAt(r)<=122||t.charCodeAt(r)>=48&&t.charCodeAt(r)<=57||t[r]==="-"||e.errors.push({errorMessage:"INVALID_CHARACTER",errorParams:[r,t[r]]});if(e.errors.length)return e.isValid=!1,e;const n=A(t);return t[15]!==n&&e.errors.push({errorMessage:"CHECKCHAR_MISMATCH",errorParams:[n,t[15]]}),t[15]===n&&n==="-"&&e.errors.push({errorMessage:"CHECKCHAR_HYPHEN"}),t[2]in d||e.warnings.push({errorMessage:"UNKNOWN_TYPE",errorParams:[t[2]]}),t.substring(0,2)in m||e.warnings.push({errorMessage:"UNKNOWN_ISSUER",errorParams:[t.substring(0,2)]}),e.issuer=v(t),e.type=O(t),e.isValid=e.errors.length===0,e}function R(){const t=Object.keys(d),e=Object.keys(m),n=t[Math.floor(Math.random()*t.length)];let r=e[Math.floor(Math.random()*e.length)]+n;for(let o=0;o<12;o++){const s=Math.floor(Math.random()*37);r+=C[s]}const i=A(r);return r+i}function b(t,e,n){let r;if(t!=null){if(!(t in d))throw new Error(`Invalid type: ${t}. Valid types are: ${Object.keys(d).join(", ")}`);r=t}else{const a=Object.keys(d);r=a[Math.floor(Math.random()*a.length)]}let i;if(e!=null){if(!(e in m))throw new Error(`Invalid issuer: ${e}. Valid issuers are: ${Object.keys(m).join(", ")}`);i=e}else{const a=Object.keys(m);i=a[Math.floor(Math.random()*a.length)]}let o;if(n!=null){if(n.length>12)throw new Error(`Identifier must be 12 characters or less, got ${n.length}`);const a=n.toLowerCase();for(let c=0;c<a.length;c++)if(!(a[c]in p))throw new Error(`Invalid character '${a[c]}' at position ${c} in identifier. Valid characters are: ${Object.keys(p).join(", ")}`);o=a.padEnd(12,"-")}else{const a=Math.floor(Math.random()*12)+1;let c="";for(let h=0;h<a;h++){const f=Math.floor(Math.random()*37);c+=C[f]}o=c.padEnd(12,"-")}const s=i+r+o,u=A(s);return s+u}function E(t){const e=document.getElementById(t);e&&e.classList.remove("hidden")}function g(t){const e=document.getElementById(t);e&&e.classList.add("hidden")}function l(t,e){const n=document.getElementById(t);n&&(n.textContent=e)}function T(t,e){const n=document.getElementById(t);n&&(n.innerHTML=e)}function I(t,e){const n=document.getElementById(t);n&&(n.textContent=e,n.classList.remove("hidden"))}function w(t){const e=document.getElementById(t);e&&e.classList.add("hidden")}function y(t,e,n=""){const r=document.getElementById(t);r&&(e?(r.setCustomValidity(""),r.classList.remove("invalid:border-red-500","invalid:ring-red-500")):(r.setCustomValidity(n),r.classList.add("invalid:border-red-500","invalid:ring-red-500")))}window.generateRandomEIC=function(){var t;try{const e=R(),n=O(e),r=v(e);l("generated-eic",e),l("generated-type",n||"Unknown"),l("generated-issuer",r?`${r.name} (${r.country})`:"Unknown"),E("generated-result"),(t=document.getElementById("generated-result"))==null||t.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(e){console.error("Error generating EIC:",e)}};window.validateIdentifierInput=function(){const e=document.getElementById("eic-identifier").value.trim();if(w("identifier-error"),y("eic-identifier",!0),!e)return;if(e.length>12){const r=`Identifier must be 12 characters or less (currently ${e.length})`;I("identifier-error",r),y("eic-identifier",!1,r);return}if(!/^[0-9a-z-]+$/i.test(e)){const r="Identifier can only contain 0-9, a-z, and hyphen (-)";I("identifier-error",r),y("eic-identifier",!1,r);return}};window.generateCustomEIC=function(){var s;const t=document.getElementById("eic-type"),e=document.getElementById("eic-issuer"),n=document.getElementById("eic-identifier"),r=t.value||null,i=e.value||null,o=n.value.trim()||null;w("identifier-error"),y("eic-identifier",!0);try{if(o){if(o.length>12){const f=`Identifier must be 12 characters or less (currently ${o.length})`;I("identifier-error",f),y("eic-identifier",!1,f),n.focus();return}if(!/^[0-9a-z-]+$/i.test(o)){const f="Identifier can only contain 0-9, a-z, and hyphen (-)";I("identifier-error",f),y("eic-identifier",!1,f),n.focus();return}}const u=b(r,i,o),a=O(u),c=v(u);l("generated-eic",u),l("generated-type",a||"Unknown"),l("generated-issuer",c?`${c.name} (${c.country})`:"Unknown"),E("generated-result"),(s=document.getElementById("generated-result"))==null||s.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(u){console.error("Error generating EIC:",u);const a=u instanceof Error?u.message:"Unknown error occurred";a.includes("type")||a.includes("issuer")?console.error("EIC generation error:",a):(I("identifier-error",a),y("eic-identifier",!1,a),n.focus())}};window.validateInputEIC=function(){const e=document.getElementById("eic-input").value.trim();if(!e){g("validation-result");return}if(E("validation-result"),g("valid-result"),g("invalid-result"),g("format-result"),!S(e)){E("format-result");return}const n=L(e);if(n.isValid)l("valid-type",n.type||"Unknown"),l("valid-issuer",n.issuer?`${n.issuer.name} (${n.issuer.country})`:"Unknown"),l("valid-check",e.charAt(15)||"N/A"),E("valid-result");else{let r="";n.errors.length>0&&(r='<div class="font-medium mb-1">Errors:</div>',n.errors.forEach(o=>{let s="";switch(o.errorMessage){case"TOO_SHORT":s="EIC code is too short (must be 16 characters)";break;case"TOO_LONG":s="EIC code is too long (must be 16 characters)";break;case"INVALID_CHARACTER":const[u,a]=o.errorParams||[];s=`Invalid character '${a}' at position ${u}`;break;case"CHECKCHAR_MISMATCH":const[c,h]=o.errorParams||[];s=`Check character mismatch. Expected '${c}', got '${h}'`;break;case"CHECKCHAR_HYPHEN":s="Check character cannot be a hyphen";break;default:s=o.errorMessage}r+=`<div>• ${s}</div>`}));let i="";n.warnings.length>0&&(i='<div class="font-medium mb-1 mt-2">Warnings:</div>',n.warnings.forEach(o=>{let s="";switch(o.errorMessage){case"UNKNOWN_TYPE":const[u]=o.errorParams||[];s=`Unknown type code '${u}'`;break;case"UNKNOWN_ISSUER":const[a]=o.errorParams||[];s=`Unknown issuer code '${a}'`;break;default:s=o.errorMessage}i+=`<div>• ${s}</div>`})),T("error-list",r),T("warning-list",i),E("invalid-result")}};window.testSampleEIC=function(t){const e=document.getElementById("eic-input");e.value=t,window.validateInputEIC()};window.clearInput=function(){const t=document.getElementById("eic-input");t.value="",g("validation-result")};function U(){const t=document.getElementById("eic-issuer");t&&Object.keys(m).sort((r,i)=>parseInt(r)-parseInt(i)).forEach(r=>{const i=m[r],o=document.createElement("option");o.value=r,o.textContent=`${i.name} (${i.country})`,t.appendChild(o)});const e=document.getElementById("eic-type");if(e){for(;e.children.length>1;)e.removeChild(e.lastChild);Object.keys(d).sort().forEach(r=>{const i=d[r],o=document.createElement("option");o.value=r,o.textContent=i,e.appendChild(o)})}}document.addEventListener("DOMContentLoaded",()=>{console.log("EIC Modern Demo loaded!"),U()});
