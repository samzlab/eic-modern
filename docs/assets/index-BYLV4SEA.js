(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}})();const A={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,g:16,h:17,i:18,j:19,k:20,l:21,m:22,n:23,o:24,p:25,q:26,r:27,s:28,t:29,u:30,v:31,w:32,x:33,y:34,z:35,"-":36},y=Object.fromEntries(Object.entries(A).map(([e,r])=>[r,e]));function T(e){return A[e]}function O(e,r){return(16-r)*e}const m={x:"PARTY",y:"AREA",z:"MEASUREMENT_POINT",v:"LOCATION",w:"RESOURCE",t:"TIE_LINE",a:"SUBSTATION"},d={10:{name:"ENTSO-E",country:"EU"},11:{name:"BDEW",country:"DE"},12:{name:"Swissgrid",country:"CH"},13:{name:"A&B",country:"AT"},14:{name:"APCS",country:"AT"},15:{name:"Mavir",country:"HU"},16:{name:"REN",country:"PT"},17:{name:"RTE",country:"FR"},18:{name:"REE",country:"ES"},19:{name:"PSE S.A.",country:"PL"},20:{name:"CREOS",country:"LU"},21:{name:"ENTSOG",country:"EU"},22:{name:"Elia",country:"BE"},23:{name:"EFET",country:"EU"},24:{name:"SEPS",country:"SK"},25:{name:"AGGM",country:"AT"},26:{name:"Terna",country:"IT"},27:{name:"CEPS",country:"CZ"},28:{name:"ELES",country:"SI"},29:{name:"ADMIE",country:"GR"},30:{name:"Transelectrica",country:"RO"},31:{name:"HOPS",country:"HR"},32:{name:"ESO AD",country:"BG"},33:{name:"MEPSO",country:"MK"},34:{name:"EMS",country:"RS"},35:{name:"CGES",country:"ME"},36:{name:"NOS BIH",country:"BA"},37:{name:"DVGW",country:"DE"},38:{name:"Elering",country:"EE"},39:{name:"FGSZ",country:"HU"},40:{name:"EPIAS",country:"TR"},41:{name:"LITGRID AB",country:"LT"},42:{name:"EU-STREAM",country:"SK"},43:{name:"AST",country:"LV"},44:{name:"Fingrid Oyj",country:"FI"},45:{name:"Energinet",country:"DK"},46:{name:"SVK",country:"SE"},47:{name:"Eirgrid",country:"IE, NI"},48:{name:"NationalGrid",country:"UK"},49:{name:"Tennet NL",country:"NL"},50:{name:"Statnett",country:"NO"},51:{name:"Plinovodi",country:"SI"},52:{name:"GTS",country:"NL"},53:{name:"GAZ-SYSTEM",country:"PL"},54:{name:"OST",country:"AL"},55:{name:"XOSERVE",country:"UK"},56:{name:"LLCGASTSOUKRAINE",country:"UA"},57:{name:"FLUXYS",country:"BE"},58:{name:"BULGARTRANSGAZ",country:"BG"},59:{name:"SRG",country:"IT"},60:{name:"Transgaz",country:"RO"},61:{name:"Conexus Baltic Grid",country:"LV"},62:{name:"UKRENERGO",country:"UA"},63:{name:"NaTran",country:"FR"},64:{name:"Moldelectrica",country:"MD"},65:{name:"GSE",country:"GE"},66:{name:"GasFINLAND",country:"FI"},67:{name:"SRBIJATRANSGAS",country:"RS"},68:{name:"VESTMOLDTRANSGAZ",country:"MD"},69:{name:"TSOC",country:"CY"},70:{name:"NOMAGAS JSC Skopje",country:"MK"}};function f(e){if(e.length!==15&&e.length!==16)return!1;e=e.toLowerCase();for(let r=0,t=e.length;r<t;++r)if(!(e.charCodeAt(r)>=97&&e.charCodeAt(r)<=122||e.charCodeAt(r)>=48&&e.charCodeAt(r)<=57||e[r]==="-"))return!1;return!0}function g(e){const r=e.substring(0,15).toLowerCase().split("").map(T).map(O).reduce((t,o)=>t+o,0);return y[36-(r-1)%37]}function h(e){if(!f(e))throw new Error("Malformed EIC code");return m[e[2]]}function S(e){if(!f(e))throw new Error("Malformed EIC code");return d[e.substring(0,2)]}function M(e){const r={isValid:!0,errors:[],warnings:[],issuer:void 0,type:void 0};e.length<16&&r.errors.push({errorMessage:"TOO_SHORT"}),e.length>16&&r.errors.push({errorMessage:"TOO_LONG"}),e=e.toLowerCase();for(let o=0,a=e.length;o<a;++o)e.charCodeAt(o)>=97&&e.charCodeAt(o)<=122||e.charCodeAt(o)>=48&&e.charCodeAt(o)<=57||e[o]==="-"||r.errors.push({errorMessage:"INVALID_CHARACTER",errorParams:[o,e[o]]});if(r.errors.length)return r.isValid=!1,r;const t=g(e);return e[15]!==t&&r.errors.push({errorMessage:"CHECKCHAR_MISMATCH",errorParams:[t,e[15]]}),e[15]===t&&t==="-"&&r.errors.push({errorMessage:"CHECKCHAR_HYPHEN"}),e[2]in m||r.warnings.push({errorMessage:"UNKNOWN_TYPE",errorParams:[e[2]]}),e.substring(0,2)in d||r.warnings.push({errorMessage:"UNKNOWN_ISSUER",errorParams:[e.substring(0,2)]}),r.issuer=S(e),r.type=h(e),r.isValid=r.errors.length===0,r}function w(){const e=Object.keys(m),r=Object.keys(d),t=e[Math.floor(Math.random()*e.length)];let o=r[Math.floor(Math.random()*r.length)]+t;for(let n=0;n<12;n++){const s=Math.floor(Math.random()*37);o+=y[s]}const a=g(o);return o+a}function N(e,r){if(!(e in m))throw new Error(`Invalid type: ${e}`);if(!(r in d))throw new Error(`Invalid issuer: ${r}`);let t=r+e;for(let a=0;a<12;a++){const n=Math.floor(Math.random()*37);t+=y[n]}const o=g(t);return t+o}function u(e){const r=document.getElementById(e);r&&r.classList.remove("hidden")}function l(e){const r=document.getElementById(e);r&&r.classList.add("hidden")}function c(e,r){const t=document.getElementById(e);t&&(t.textContent=r)}function I(e,r){const t=document.getElementById(e);t&&(t.innerHTML=r)}window.generateRandomEIC=function(){var e;try{const r=w(),t=h(r),o=S(r);c("generated-eic",r),c("generated-type",t||"Unknown"),c("generated-issuer",o?`${o.name} (${o.country})`:"Unknown"),u("generated-result"),(e=document.getElementById("generated-result"))==null||e.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(r){console.error("Error generating EIC:",r)}};window.generateCustomEIC=function(){var a;const e=document.getElementById("eic-type"),r=document.getElementById("eic-issuer"),t=e.value,o=r.value;if(!t||!o){alert("Please select both type and issuer");return}try{const n=N(t,o),s=h(n),i=S(n);c("generated-eic",n),c("generated-type",s||"Unknown"),c("generated-issuer",i?`${i.name} (${i.country})`:"Unknown"),u("generated-result"),(a=document.getElementById("generated-result"))==null||a.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(n){alert(`Error generating EIC: ${n}`)}};window.validateInputEIC=function(){const r=document.getElementById("eic-input").value.trim();if(!r){l("validation-result");return}if(u("validation-result"),l("valid-result"),l("invalid-result"),l("format-result"),!f(r)){u("format-result");return}const t=M(r);if(t.isValid)c("valid-type",t.type||"Unknown"),c("valid-issuer",t.issuer?`${t.issuer.name} (${t.issuer.country})`:"Unknown"),c("valid-check",r.charAt(15)||"N/A"),u("valid-result");else{let o="";t.errors.length>0&&(o='<div class="font-medium mb-1">Errors:</div>',t.errors.forEach(n=>{let s="";switch(n.errorMessage){case"TOO_SHORT":s="EIC code is too short (must be 16 characters)";break;case"TOO_LONG":s="EIC code is too long (must be 16 characters)";break;case"INVALID_CHARACTER":const[i,E]=n.errorParams||[];s=`Invalid character '${E}' at position ${i}`;break;case"CHECKCHAR_MISMATCH":const[C,p]=n.errorParams||[];s=`Check character mismatch. Expected '${C}', got '${p}'`;break;case"CHECKCHAR_HYPHEN":s="Check character cannot be a hyphen";break;default:s=n.errorMessage}o+=`<div>• ${s}</div>`}));let a="";t.warnings.length>0&&(a='<div class="font-medium mb-1 mt-2">Warnings:</div>',t.warnings.forEach(n=>{let s="";switch(n.errorMessage){case"UNKNOWN_TYPE":const[i]=n.errorParams||[];s=`Unknown type code '${i}'`;break;case"UNKNOWN_ISSUER":const[E]=n.errorParams||[];s=`Unknown issuer code '${E}'`;break;default:s=n.errorMessage}a+=`<div>• ${s}</div>`})),I("error-list",o),I("warning-list",a),u("invalid-result")}};window.testSampleEIC=function(e){const r=document.getElementById("eic-input");r.value=e,window.validateInputEIC()};window.clearInput=function(){const e=document.getElementById("eic-input");e.value="",l("validation-result")};document.addEventListener("DOMContentLoaded",()=>{console.log("EIC Modern Demo loaded!")});
