(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();const p={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,g:16,h:17,i:18,j:19,k:20,l:21,m:22,n:23,o:24,p:25,q:26,r:27,s:28,t:29,u:30,v:31,w:32,x:33,y:34,z:35,"-":36},C=Object.fromEntries(Object.entries(p).map(([e,r])=>[r,e]));function v(e){return p[e]}function N(e,r){return(16-r)*e}const y={x:"PARTY",y:"AREA",z:"MEASUREMENT_POINT",v:"LOCATION",w:"RESOURCE",t:"TIE_LINE",a:"SUBSTATION"},E={10:{name:"ENTSO-E",country:"EU"},11:{name:"BDEW",country:"DE"},12:{name:"Swissgrid",country:"CH"},13:{name:"A&B",country:"AT"},14:{name:"APCS",country:"AT"},15:{name:"Mavir",country:"HU"},16:{name:"REN",country:"PT"},17:{name:"RTE",country:"FR"},18:{name:"REE",country:"ES"},19:{name:"PSE S.A.",country:"PL"},20:{name:"CREOS",country:"LU"},21:{name:"ENTSOG",country:"EU"},22:{name:"Elia",country:"BE"},23:{name:"EFET",country:"EU"},24:{name:"SEPS",country:"SK"},25:{name:"AGGM",country:"AT"},26:{name:"Terna",country:"IT"},27:{name:"CEPS",country:"CZ"},28:{name:"ELES",country:"SI"},29:{name:"ADMIE",country:"GR"},30:{name:"Transelectrica",country:"RO"},31:{name:"HOPS",country:"HR"},32:{name:"ESO AD",country:"BG"},33:{name:"MEPSO",country:"MK"},34:{name:"EMS",country:"RS"},35:{name:"CGES",country:"ME"},36:{name:"NOS BIH",country:"BA"},37:{name:"DVGW",country:"DE"},38:{name:"Elering",country:"EE"},39:{name:"FGSZ",country:"HU"},40:{name:"EPIAS",country:"TR"},41:{name:"LITGRID AB",country:"LT"},42:{name:"EU-STREAM",country:"SK"},43:{name:"AST",country:"LV"},44:{name:"Fingrid Oyj",country:"FI"},45:{name:"Energinet",country:"DK"},46:{name:"SVK",country:"SE"},47:{name:"Eirgrid",country:"IE, NI"},48:{name:"NationalGrid",country:"UK"},49:{name:"Tennet NL",country:"NL"},50:{name:"Statnett",country:"NO"},51:{name:"Plinovodi",country:"SI"},52:{name:"GTS",country:"NL"},53:{name:"GAZ-SYSTEM",country:"PL"},54:{name:"OST",country:"AL"},55:{name:"XOSERVE",country:"UK"},56:{name:"LLCGASTSOUKRAINE",country:"UA"},57:{name:"FLUXYS",country:"BE"},58:{name:"BULGARTRANSGAZ",country:"BG"},59:{name:"SRG",country:"IT"},60:{name:"Transgaz",country:"RO"},61:{name:"Conexus Baltic Grid",country:"LV"},62:{name:"UKRENERGO",country:"UA"},63:{name:"NaTran",country:"FR"},64:{name:"Moldelectrica",country:"MD"},65:{name:"GSE",country:"GE"},66:{name:"GasFINLAND",country:"FI"},67:{name:"SRBIJATRANSGAS",country:"RS"},68:{name:"VESTMOLDTRANSGAZ",country:"MD"},69:{name:"TSOC",country:"CY"},70:{name:"NOMAGAS JSC Skopje",country:"MK"}};function S(e){if(e.length!==15&&e.length!==16)return!1;e=e.toLowerCase();for(let r=0,t=e.length;r<t;++r)if(!(e.charCodeAt(r)>=97&&e.charCodeAt(r)<=122||e.charCodeAt(r)>=48&&e.charCodeAt(r)<=57||e[r]==="-"))return!1;return!0}function A(e){const r=e.substring(0,15).toLowerCase().split("").map(v).map(N).reduce((t,n)=>t+n,0);return C[36-(r-1)%37]}function M(e){if(!S(e))throw new Error("Malformed EIC code");return y[e[2]]}function O(e){if(!S(e))throw new Error("Malformed EIC code");return E[e.substring(0,2)]}function L(e){const r={isValid:!0,errors:[],warnings:[],issuer:void 0,type:void 0};e.length<16&&r.errors.push({errorMessage:"TOO_SHORT"}),e.length>16&&r.errors.push({errorMessage:"TOO_LONG"}),e=e.toLowerCase();for(let n=0,i=e.length;n<i;++n)e.charCodeAt(n)>=97&&e.charCodeAt(n)<=122||e.charCodeAt(n)>=48&&e.charCodeAt(n)<=57||e[n]==="-"||r.errors.push({errorMessage:"INVALID_CHARACTER",errorParams:[n,e[n]]});if(r.errors.length)return r.isValid=!1,r;const t=A(e);return e[15]!==t&&r.errors.push({errorMessage:"CHECKCHAR_MISMATCH",errorParams:[t,e[15]]}),e[15]===t&&t==="-"&&r.errors.push({errorMessage:"CHECKCHAR_HYPHEN"}),e[2]in y||r.warnings.push({errorMessage:"UNKNOWN_TYPE",errorParams:[e[2]]}),e.substring(0,2)in E||r.warnings.push({errorMessage:"UNKNOWN_ISSUER",errorParams:[e.substring(0,2)]}),r.issuer=O(e),r.type=M(e),r.isValid=r.errors.length===0,r}function R(){const e=Object.keys(y),r=Object.keys(E),t=e[Math.floor(Math.random()*e.length)];let n=r[Math.floor(Math.random()*r.length)]+t;for(let o=0;o<12;o++){const s=Math.floor(Math.random()*37);n+=C[s]}const i=A(n);return n+i}function b(e,r,t){let n;if(e!=null){if(!(e in y))throw new Error(`Invalid type: ${e}. Valid types are: ${Object.keys(y).join(", ")}`);n=e}else{const a=Object.keys(y);n=a[Math.floor(Math.random()*a.length)]}let i;if(r!=null){if(!(r in E))throw new Error(`Invalid issuer: ${r}. Valid issuers are: ${Object.keys(E).join(", ")}`);i=r}else{const a=Object.keys(E);i=a[Math.floor(Math.random()*a.length)]}let o;if(t!=null){if(t.length>12)throw new Error(`Identifier must be 12 characters or less, got ${t.length}`);const a=t.toLowerCase();for(let c=0;c<a.length;c++)if(!(a[c]in p))throw new Error(`Invalid character '${a[c]}' at position ${c} in identifier. Valid characters are: ${Object.keys(p).join(", ")}`);o=a.padEnd(12,"-")}else{const a=Math.floor(Math.random()*12)+1;let c="";for(let h=0;h<a;h++){const d=Math.floor(Math.random()*37);c+=C[d]}o=c.padEnd(12,"-")}const s=i+n+o,u=A(s);return s+u}function f(e){const r=document.getElementById(e);r&&r.classList.remove("hidden")}function g(e){const r=document.getElementById(e);r&&r.classList.add("hidden")}function l(e,r){const t=document.getElementById(e);t&&(t.textContent=r)}function w(e,r){const t=document.getElementById(e);t&&(t.innerHTML=r)}function I(e,r){const t=document.getElementById(e);t&&(t.textContent=r,t.classList.remove("hidden"))}function T(e){const r=document.getElementById(e);r&&r.classList.add("hidden")}function m(e,r,t=""){const n=document.getElementById(e);n&&(r?(n.setCustomValidity(""),n.classList.remove("invalid:border-red-500","invalid:ring-red-500")):(n.setCustomValidity(t),n.classList.add("invalid:border-red-500","invalid:ring-red-500")))}window.generateRandomEIC=function(){var e;try{const r=R(),t=M(r),n=O(r);l("generated-eic",r),l("generated-type",t||"Unknown"),l("generated-issuer",n?`${n.name} (${n.country})`:"Unknown"),f("generated-result"),(e=document.getElementById("generated-result"))==null||e.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(r){console.error("Error generating EIC:",r)}};window.validateIdentifierInput=function(){const r=document.getElementById("eic-identifier").value.trim();if(T("identifier-error"),m("eic-identifier",!0),!r)return;if(r.length>12){const n=`Identifier must be 12 characters or less (currently ${r.length})`;I("identifier-error",n),m("eic-identifier",!1,n);return}if(!/^[0-9a-z-]+$/i.test(r)){const n="Identifier can only contain 0-9, a-z, and hyphen (-)";I("identifier-error",n),m("eic-identifier",!1,n);return}};window.generateCustomEIC=function(){var s;const e=document.getElementById("eic-type"),r=document.getElementById("eic-issuer"),t=document.getElementById("eic-identifier"),n=e.value||null,i=r.value||null,o=t.value.trim()||null;T("identifier-error"),m("eic-identifier",!0);try{if(o){if(o.length>12){const d=`Identifier must be 12 characters or less (currently ${o.length})`;I("identifier-error",d),m("eic-identifier",!1,d),t.focus();return}if(!/^[0-9a-z-]+$/i.test(o)){const d="Identifier can only contain 0-9, a-z, and hyphen (-)";I("identifier-error",d),m("eic-identifier",!1,d),t.focus();return}}const u=b(n,i,o),a=M(u),c=O(u);l("generated-eic",u),l("generated-type",a||"Unknown"),l("generated-issuer",c?`${c.name} (${c.country})`:"Unknown"),f("generated-result"),(s=document.getElementById("generated-result"))==null||s.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(u){console.error("Error generating EIC:",u);const a=u instanceof Error?u.message:"Unknown error occurred";a.includes("type")||a.includes("issuer")?console.error("EIC generation error:",a):(I("identifier-error",a),m("eic-identifier",!1,a),t.focus())}};window.validateInputEIC=function(){const r=document.getElementById("eic-input").value.trim();if(!r){g("validation-result");return}if(f("validation-result"),g("valid-result"),g("invalid-result"),g("format-result"),!S(r)){f("format-result");return}const t=L(r);if(t.isValid)l("valid-type",t.type||"Unknown"),l("valid-issuer",t.issuer?`${t.issuer.name} (${t.issuer.country})`:"Unknown"),l("valid-check",r.charAt(15)||"N/A"),f("valid-result");else{let n="";t.errors.length>0&&(n='<div class="font-medium mb-1">Errors:</div>',t.errors.forEach(o=>{let s="";switch(o.errorMessage){case"TOO_SHORT":s="EIC code is too short (must be 16 characters)";break;case"TOO_LONG":s="EIC code is too long (must be 16 characters)";break;case"INVALID_CHARACTER":const[u,a]=o.errorParams||[];s=`Invalid character '${a}' at position ${u}`;break;case"CHECKCHAR_MISMATCH":const[c,h]=o.errorParams||[];s=`Check character mismatch. Expected '${c}', got '${h}'`;break;case"CHECKCHAR_HYPHEN":s="Check character cannot be a hyphen";break;default:s=o.errorMessage}n+=`<div>• ${s}</div>`}));let i="";t.warnings.length>0&&(i='<div class="font-medium mb-1 mt-2">Warnings:</div>',t.warnings.forEach(o=>{let s="";switch(o.errorMessage){case"UNKNOWN_TYPE":const[u]=o.errorParams||[];s=`Unknown type code '${u}'`;break;case"UNKNOWN_ISSUER":const[a]=o.errorParams||[];s=`Unknown issuer code '${a}'`;break;default:s=o.errorMessage}i+=`<div>• ${s}</div>`})),w("error-list",n),w("warning-list",i),f("invalid-result")}};window.testSampleEIC=function(e){const r=document.getElementById("eic-input");r.value=e,window.validateInputEIC()};window.clearInput=function(){const e=document.getElementById("eic-input");e.value="",g("validation-result")};document.addEventListener("DOMContentLoaded",()=>{console.log("EIC Modern Demo loaded!")});
